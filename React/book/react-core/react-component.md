
## 클래스 컴포넌트와 함수형 컴포넌트

리액트 16.8 버전 이전에는 단순히 무상태 컴포넌트를 구현하기 위한 하나의 수단이었다.
클래스 컴포넌트와 비교한 내용은 다음과 같다.

- this 키워드를 사용하지 않아도 된다.
- state 를 객체가 아닌 각각의 원시 값 또는 객체로 관리 가능하다.
- 생명주기 메서드가 존재하지 않는다. `useEffect` 를 사용하여 비슷하게 구현할 수 있다.
- 함수 컴포넌트는 렌더링 된 시점의 props 값이 유지되지만, 클래스 컴포넌트는 this 에 바인딩된 props 를 사용하기 때문에 시간의 흐름에 따라 변경되는 this 를 기준으로 props 가 변경된다.

> :: 🌱<br/>
> 클래스 컴포넌트에 대한 것은 공식문서에서 확인하기 <br/>
> [React: Component](https://react.dev/reference/react/Component#)

## 리액트 렌더링

리액트 애플리케이션 트리 안에 있는 모든 컴포넌트 각각의 props, state 값을 기반으로 어떻게 UI 를 구성하고 이를 바탕으로 **어떤 DOM 결과를 브라우저에 제공할 것인지 계산하는 일련의 과정**을 의미한다.

리액트에서 렌더링 과정이 일어나는 상황은 다음과 같다.

1. 애플리케이션 최초 렌더링
2. 최초 렌더링 이후 발생하는 모든 렌더링 = 리렌더링
  - `useState()` 의 setter 가 실행되어, state 가 업데이트 된 경우
  - `useReducer()` 의 dispatch 함수가 실행되어, state 가 업데이트 된 경우
  - 컴포넌트의 `key` 값이 변경되는 경우
  - props 가 변경되는 경우
  - 부모 컴포넌트가 리렌더링 되는 경우

> :: 🌱 <br/>
> 배열 렌더링 시 key 값으로 index 사용을 지양해야 하는 이유는 무엇일까요?
>
> 리액트가 파이버 트리 구조를 통해 렌더링을 진행할 때, current 트리와 workInProgress 트리 사이에서 어떤 컴포넌트에 변경사항이 존재하는지 판단하는 식별자로 key 값을 사용한다. 만약, key 값으로 index 를 사용하게 되면, 배열의 순서가 변경됨에 따라 index 값이 변경되어 의도와 다르게 렌더링이 되는 경우가 발생할 수 있다.
>
> 그렇기 때문에, key 값은 변하지 않고 각 컴포넌트의 고유한 식별자를 사용하는 것이 좋다.

### 리액트 렌더링 프로세스

리액트의 렌더링 프로세스는 총 두 단계로 분리되어 실행된다.

1. 렌더 단계(Render Phase)
  - 컴포넌트를 렌더링하고 변경사항을 계산하는 모든 작업
  - type, props, key 세 가지 중 하나라도 변경되면 변경 필요한 컴포넌트로 체크
2. 커밋 단계(Commit Phase)
  - 렌더 단계의 변경 사항을 실제 DOM 에 반영하는 작업
  - 이 단계가 끝나야 실제 브라우저 렌더링이 발생한다.

여기서 알 수 있는 중요 포인트는, **리액트의 렌더링이 일어난다고 무조건 브라우저 DOM 렌더링이 일어나진 않는다는 것이다.** 변경 사항 계산 이후, 변경 사항을 감지하지 않았다면 커밋 단계는 생략될 수 있다.

이 두 가지 과정으로 이루어진 리액트의 렌더링이 과거에는 항상 동기적으로 이루어졌지만, **리액트 18에서 동시성 렌더링이 되어 렌더 단계가 비동기로 작동**하면서 **렌더링의 우선순위 낮추거나, 중단 또는 재개할 수 있게 되었다.**

> :: 🌱 동시성에 대한 더 자세한 내용은
> - [explain concurrency](https://github.com/reactwg/react-18/discussions/46#discussioncomment-846786)
> - [Inside React(동시성을 구현하는 기술)](https://tv.naver.com/v/23652451)
> - [React 18 톺아보기 - 04. Concurrent Render](https://goidle.github.io/react/in-depth-react18-concurrent_render/)
> - https://dev.to/jahid6597/why-useeffect-is-running-twice-in-react-18c6
